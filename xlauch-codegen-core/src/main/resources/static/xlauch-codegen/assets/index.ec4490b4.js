import{s as r}from"./request.e0f9835c.js";import{s as d,q as i,E as u}from"./index.2d3701b6.js";const y=l=>{const e=((t,a)=>{for(const s in t)Object.getOwnPropertyDescriptor(a,s)||(a[s]=t[s]);return a})({createdIsNeed:!0,dataListUrl:"",isPage:!0,deleteUrl:"",primaryKey:"id",exportUrl:"",queryForm:{},dataList:[],order:"",asc:!1,page:1,limit:10,total:0,pageSizes:[1,10,20,50,100,200],dataListLoading:!1,dataListSelections:[]},l);d(()=>{e.createdIsNeed&&n()});const n=()=>{!e.dataListUrl||(e.dataListLoading=!0,r.get(e.dataListUrl,{params:{order:e.order,asc:e.asc,page:e.isPage?e.page:null,limit:e.isPage?e.limit:null,...e.queryForm}}).then(t=>{e.dataList=e.isPage?t.data.list:t.data,e.total=e.isPage?t.data.total:0}),e.dataListLoading=!1)};return{getDataList:()=>{e.page=1,n()},sizeChangeHandle:t=>{e.page=1,e.limit=t,n()},currentChangeHandle:t=>{e.page=t,n()},selectionChangeHandle:t=>{e.dataListSelections=t.map(a=>e.primaryKey&&a[e.primaryKey])},sortChangeHandle:t=>{const{prop:a,order:s}=t;a&&s?(e.order=a,e.asc=s==="ascending"):e.order="",n()},deleteHandle:t=>{!e.deleteUrl||i.confirm("\u786E\u5B9A\u8FDB\u884C\u5220\u9664\u64CD\u4F5C?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{r.delete(e.deleteUrl+"/"+t).then(()=>{u.success("\u5220\u9664\u6210\u529F"),n()})}).catch(()=>{})},deleteBatchHandle:t=>{let a=[];if(t)a=[t];else if(a=e.dataListSelections?e.dataListSelections:[],a.length===0){u.warning("\u8BF7\u9009\u62E9\u5220\u9664\u8BB0\u5F55");return}i.confirm("\u786E\u5B9A\u8FDB\u884C\u5220\u9664\u64CD\u4F5C?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.deleteUrl&&r.delete(e.deleteUrl,{data:a}).then(()=>{u.success("\u5220\u9664\u6210\u529F"),n()})}).catch(()=>{})}}};export{y as u};
